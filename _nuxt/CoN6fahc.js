import{l as w,z as D,g as M,af as N,T as B,i as U}from"./DBBIm6QW.js";import{a as P}from"./BA5sWNxj.js";import{e as V,r as f,k as I,l as T,c as k,o as n,P as b,O as S,a3 as z,K as d,q as x,p as v,a as u,a2 as W,i as $,M as L,b as p,B as R,w as m,d as q,t as A}from"#entry";import{h as J,E as K}from"./BuJ6anXd.js";const O=["onClick"],G=["placeholder"],j=V({__name:"EnvironmentColors",props:{activeColor:{},selector:{type:Boolean,default:!1}},emits:["select"],setup(g,{emit:y}){const l=g,C=y,a=f(""),i=f(null),c=f(!1),s=f(!1),o=[{color:"#FFFFFF"},{color:"#EF0006"},{color:"#EDBE20"},{color:"#069061"},{color:"#FB892C"},{color:"#0082D0"},{color:"#5203D1"},{color:"#FFC0CB"}],h=I(()=>l.activeColor&&!o.some(e=>e.color===l.activeColor)||a.value?`background-color: ${l.activeColor||a.value};`:"background: linear-gradient(to right, rgb(235, 87, 87), rgb(242, 201, 76), rgb(76, 183, 130), rgb(78, 167, 252), rgb(250, 96, 122));"),F=()=>{c.value=!c.value,l.selector&&(s.value=!1),R(()=>{i.value&&i.value.focus()})};T(a,e=>{e&&!e.startsWith("#")&&(a.value=`#${e}`),c.value=!0});const E=()=>{l.selector&&(s.value=!s.value)},_=e=>{C("select",e),l.selector&&(s.value=!1)};return(e,t)=>(n(),k("div",null,[c.value?b("",!0):(n(),k(S,{key:0},[l.selector&&!s.value?(n(),k("div",{key:0,class:d(["flex cursor-pointer items-center justify-center rounded-full",l.selector?"h-4 w-4":"h-5 w-5"]),style:z({backgroundColor:e.activeColor}),onClick:E},[e.activeColor?(n(),x(v(w),{key:0,class:d(["text-c-btn",l.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"])):b("",!0)],6)):b("",!0),s.value||!l.selector?(n(),k("div",{key:1,class:d(["color-selector flex flex-row items-center justify-between gap-1.5 space-x-1",l.selector?"h-4":"min-h-10 min-w-[296px]"])},[(n(),k(S,null,W(o,r=>u("div",{key:r.color,class:d(["flex cursor-pointer items-center justify-center rounded-full",l.selector?"h-4 w-4":"h-5 w-5"]),style:z({backgroundColor:r.color}),onClick:X=>_(r.color)},[e.activeColor===r.color&&!a.value?(n(),x(v(w),{key:0,class:d(["text-c-btn",l.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"])):b("",!0)],14,O)),64)),t[2]||(t[2]=u("hr",{class:"border-ghost h-5 w-0.5 border-l"},null,-1)),u("label",{class:d(["z-10 flex cursor-pointer flex-row items-center justify-center gap-2 rounded-full",l.selector?"h-4 w-4":"h-5 w-5"]),style:z(h.value),onClick:F},[!c.value&&(e.activeColor===a.value||e.activeColor&&!o.some(r=>r.color===e.activeColor))?(n(),x(v(w),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"})):b("",!0)],6)],2)):b("",!0)],64)),c.value?(n(),k("div",{key:1,class:d(["color-selector flex flex-1 items-center gap-2 rounded",l.selector?"h-4":"min-h-10"])},[u("span",{class:d(["absolute rounded-full border border-dashed",l.selector?"h-4 w-4":"h-5 w-5"])},null,2),u("span",{class:d(["z-[1] rounded-full",l.selector?"h-4 w-4":"h-5 w-5"]),style:z(h.value)},null,6),$(u("input",{ref_key:"customColorInputRef",ref:i,"onUpdate:modelValue":t[0]||(t[0]=r=>a.value=r),class:"w-full flex-1 border-transparent text-sm outline-none",placeholder:e.activeColor||"#000000",type:"text",onInput:t[1]||(t[1]=r=>_(a.value))},null,40,G),[[L,a.value]]),u("button",{class:"text-c-3 hover:bg-b-2 rounded-lg p-1.5",type:"button",onClick:F},[p(v(w),{icon:"Checkmark",size:"xs"})])],2)):b("",!0)]))}}),H={class:"flex flex-col gap-4"},oe=V({__name:"EnvironmentColorModal",props:{state:{},selectedColor:{}},emits:["cancel","submit"],setup(g,{emit:y}){const l=g,C=y,a=f(""),i=s=>{a.value=s},c=()=>{C("submit",a.value),a.value=""};return(s,o)=>(n(),x(v(D),{size:"xxs",state:s.state,title:"Edit Environment Color"},{default:m(()=>[u("div",H,[p(j,{activeColor:a.value||l.selectedColor,class:"w-full p-1",onSelect:i},null,8,["activeColor"]),p(P,{onCancel:o[0]||(o[0]=h=>C("cancel")),onSubmit:c})])]),_:1},8,["state"]))}}),Q={class:"flex items-start gap-2"},te=V({__name:"EnvironmentModal",props:{state:{},activeWorkspaceCollections:{},collectionId:{}},emits:["cancel","submit"],setup(g,{emit:y}){const l=g,C=y,{events:a}=M(),i=f(""),c=f("#FFFFFF"),s=I(()=>[...l.activeWorkspaceCollections.filter(e=>e.info?.title!=="Drafts").map(e=>({id:e.uid,label:e.info?.title??"Untitled Collection"}))]),o=f(s.value.find(e=>e.id===l.collectionId)),{toast:h}=U(),F=e=>{c.value=e};T(()=>l.state.open,e=>{e&&(i.value="",c.value="#FFFFFF",l.collectionId?o.value=s.value.find(t=>t.id===l.collectionId):o.value=void 0)});const E=()=>{if(!i.value.trim()){h("Please enter a name before adding an environment.","error");return}if(!o.value?.id){h("Please select a collection before adding an environment.","error");return}C("submit",{name:i.value,color:c.value,type:o.value?.id==="global"?"global":"collection",collectionId:o.value?.id!=="global"?o.value?.id:void 0})},_=()=>{l.state.hide(),a.commandPalette.emit({commandName:"Create Collection"})};return(e,t)=>(n(),x(v(D),{bodyClass:"border-t-0 rounded-t-lg",size:"xs",state:e.state},{default:m(()=>[p(J,{disabled:!o.value||!i.value.trim(),onCancel:t[2]||(t[2]=r=>C("cancel")),onSubmit:E},{options:m(()=>[p(v(N),{modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=r=>o.value=r),options:s.value,placeholder:"Select Type"},{default:m(()=>[s.value.length>0?(n(),x(v(B),{key:0,class:"hover:bg-b-2 max-h-8 w-fit justify-between gap-1 p-2 text-xs",variant:"outlined"},{default:m(()=>[u("span",{class:d(o.value?"text-c-1":"text-c-3")},A(o.value?o.value.label:"Select Collection"),3),p(v(w),{class:"text-c-3",icon:"ChevronDown",size:"xs"})]),_:1})):(n(),x(v(B),{key:1,class:"hover:bg-b-2 max-h-8 justify-between gap-1 p-2 text-xs",variant:"outlined",onClick:_},{default:m(()=>t[3]||(t[3]=[u("span",{class:"text-c-1"},"Create Collection",-1)])),_:1,__:[3]}))]),_:1},8,["modelValue","options"])]),submit:m(()=>t[4]||(t[4]=[q(" Add Environment ")])),default:m(()=>[u("div",Q,[p(j,{activeColor:c.value,class:"peer",selector:"",onSelect:F},null,8,["activeColor"]),p(K,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=r=>i.value=r),class:"-mt-[.5px] !p-0 peer-has-[.color-selector]:hidden",placeholder:"Environment name"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}});export{te as J,oe as M};
